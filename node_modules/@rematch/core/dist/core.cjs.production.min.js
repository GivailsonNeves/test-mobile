"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,r}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("redux"));function n(){return n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},n.apply(this,arguments)}function t(e,r){var n={};Object.keys(r.reducers).forEach((function(e){var t=function(e){return e.indexOf("/")>-1}(e)?e:r.name+"/"+e;n[t]=r.reducers[e]}));var t=function(e,t){return void 0===e&&(e=r.state),t.type in n?n[t.type](e,t.payload,t.meta):e},o=r.baseReducer,u=o?function(e,n){return void 0===e&&(e=r.state),t(o(e,n),n)}:t;e.forEachPlugin("onReducer",(function(n){u=n(u,r.name,e)||u})),e.reduxConfig.reducers[r.name]=u}function o(e){var n,t,o=e.reduxConfig.rootReducers,u=(t=(n=e.reduxConfig).combineReducers||r.combineReducers,Object.keys(n.reducers).length?t(n.reducers):function(e){return e}),c=u;return o&&Object.keys(o).length&&(c=function(e,r){var n=o[r.type];return u(n?n(e,r):e,r)}),e.forEachPlugin("onRootReducer",(function(r){c=r(c,e)||c})),c}var u=function(e,r,n,t){return Object.assign((function(t,o){var u={type:r+"/"+n};return void 0!==t&&(u.payload=t),void 0!==o&&(u.meta=o),e.dispatch(u)}),{isEffect:t})};function c(e,r,n){e.dispatch[""+n.name]={},function(e,r,n){var t=e.dispatch[n.name];Object.keys(n.reducers).forEach((function(r){t[r]=u(e,n.name,r,!1)}));var o={};n.effects&&(o="function"==typeof n.effects?n.effects(e.dispatch):n.effects),Object.keys(o).forEach((function(c){r.effects[n.name+"/"+c]=o[c].bind(t),t[c]=u(e,n.name,c,!0)}))}(e,r,n),r.forEachPlugin("onModel",(function(r){r(n,e)}))}var i=0;function d(e,r){return r?n({},r,e):e}var a=function(e){var u=function(e){var r,t,o,u=null!=(r=e.name)?r:"Rematch Store "+i;i+=1;var c={name:u,models:e.models||{},plugins:e.plugins||[],redux:n({reducers:{},rootReducers:{},enhancers:[],middlewares:[]},e.redux,{devtoolOptions:n({name:u},null!=(t=null==(o=e.redux)?void 0:o.devtoolOptions)?t:{})})};return c.plugins.forEach((function(e){e.config&&(c.models=d(c.models,e.config.models),e.config.redux&&(c.redux.initialState=d(c.redux.initialState,e.config.redux.initialState),c.redux.reducers=d(c.redux.reducers,e.config.redux.reducers),c.redux.rootReducers=d(c.redux.rootReducers,e.config.redux.reducers),c.redux.enhancers=[].concat(c.redux.enhancers,e.config.redux.enhancers||[]),c.redux.middlewares=[].concat(c.redux.middlewares,e.config.redux.middlewares||[]),c.redux.combineReducers=c.redux.combineReducers||e.config.redux.combineReducers,c.redux.createStore=c.redux.createStore||e.config.redux.createStore))})),c}(e||{});return function(e){var u=function(e){return{models:(r=e.models,Object.keys(r).map((function(e){return n({name:e,reducers:{}},r[e])}))),reduxConfig:e.redux,forEachPlugin:function(r,n){e.plugins.forEach((function(e){e[r]&&n(e[r])}))},effects:{}};var r}(e);u.reduxConfig.middlewares.push(function(e){return function(r){return function(n){return function(t){return t.type in e.effects?(n(t),e.effects[t.type](t.payload,r.getState(),t.meta)):n(t)}}}}(u)),u.forEachPlugin("createMiddleware",(function(e){u.reduxConfig.middlewares.push(e(u))}));var i,d=function(e){e.models.forEach((function(r){return t(e,r)}));var n,u=o(e),c=r.applyMiddleware.apply(r,e.reduxConfig.middlewares),i=(n=e.reduxConfig.devtoolOptions,void 0===n&&(n={}),!n.disabled&&"object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(n):r.compose).apply(void 0,e.reduxConfig.enhancers.concat([c])),d=e.reduxConfig.initialState;return(e.reduxConfig.createStore||r.createStore)(u,void 0===d?{}:d,i)}(u),a=n({},d,{name:e.name,addModel:function(e){t(u,e),c(a,u,e),d.replaceReducer(o(u)),d.dispatch({type:"@@redux/REPLACE"})}});return i=a,e.plugins.forEach((function(e){e.exposed&&Object.keys(e.exposed).forEach((function(r){if(e.exposed){var n=e.exposed[r];i[r]="function"==typeof n?function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return n.apply(void 0,[i].concat(r))}:Object.create(e.exposed[r])}}))})),u.models.forEach((function(e){return c(a,u,e)})),u.forEachPlugin("onStoreCreated",(function(e){a=e(a,u)||a})),a}(u)},f=function(){return function(e){return e}},s={init:a,createModel:f};exports.createModel=f,exports.default=s,exports.init=a;
//# sourceMappingURL=core.cjs.production.min.js.map
